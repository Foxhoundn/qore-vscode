{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "name": "Qore",
    "patterns": [
        { "include": "#comments" },
        { "include": "#parse_options" },
        { "include": "#regexps" },
        { "include": "#binary" },
        { "include": "#keywords" },
        { "include": "#operators" },
        { "include": "#strings" },
        { "include": "#dates" },
        { "include": "#numbers" },
        { "include": "#constants" },
        { "include": "#storage_types" },
        { "include": "#storage_modifiers" },
        { "include": "#builtins" }
    ],
    "repository": {
        "comments": {
            "patterns": [
                {
                    "comment": "Single-line comment",
                    "name": "comment.line.number-sign.qore",
                    "begin": "#",
                    "end": "$"
                },
                {
                    "comment": "Block comment",
                    "begin": "/\\*",
                    "end": "\\*/",
                    "captures": {
                        "0": {
                            "name": "punctuation.definition.comment.qore"
                        }
                    },
                    "name": "comment.block.qore"
                }
            ]
        },
        "regexps": {
            "patterns": [
                {
                    "comment": "Regex match",
                    "begin": "(=~)\\s*(/)",
                    "end": "((?:[^/]|\\/)*)(/)([imsx]*)",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.operator.regexmatch.qore"
                        },
                        "2": {
                            "name": "keyword.operator.regexopen.qore"
                        }
                    },
                    "endCaptures": {
                        "1": {
                            "name": "string.regexp.qore"
                        },
                        "2": {
                            "name": "keyword.operator.regexclose.qore"
                        },
                        "3": {
                            "name": "keyword.other.regex.modifier.qore"
                        }
                    },
                    "name": "meta.regex.qore"
                },
                {
                    "comment": "Regex notmatch",
                    "begin": "(!~)\\s*(/)",
                    "end": "((?:[^/]|\\/)*)(/)([imsx]*)",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.operator.regexnotmatch.qore"
                        },
                        "2": {
                            "name": "keyword.operator.regexopen.qore"
                        }
                    },
                    "endCaptures": {
                        "1": {
                            "name": "string.regexp.qore"
                        },
                        "2": {
                            "name": "keyword.operator.regexclose.qore"
                        },
                        "3": {
                            "name": "keyword.other.regex.modifier.qore"
                        }
                    },
                    "name": "meta.regex.qore"
                },
                {
                    "comment": "Regex match (extract)",
                    "begin": "(=~)\\s*(x/)",
                    "end": "((?:[^/]|\\/)*)(/)([imsxg]*)",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.operator.regexmatch.qore"
                        },
                        "2": {
                            "name": "keyword.operator.regextractopen.qore"
                        }
                    },
                    "endCaptures": {
                        "1": {
                            "name": "string.regexp.qore"
                        },
                        "2": {
                            "name": "keyword.operator.regexclose.qore"
                        },
                        "3": {
                            "name": "keyword.other.regex.modifier.qore"
                        }
                    },
                    "name": "meta.regex.extraction.qore"
                },
                {
                    "comment": "Regex match (substitution)",
                    "begin": "(=~)\\s*(s/)",
                    "end": "((?:[^/]|\\/)*)(/)((?:[^/]|\\/)*)(/)([imsxg]*)",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.operator.regexmatch.qore"
                        },
                        "2": {
                            "name": "keyword.operator.regexsubstopen.qore"
                        }
                    },
                    "endCaptures": {
                        "1": {
                            "name": "string.regexp.qore"
                        },
                        "2": {
                            "name": "keyword.operator.regexmiddle.qore"
                        },
                        "3": {
                            "name": "string.regexp.qore"
                        },
                        "4": {
                            "name": "keyword.operator.regexclose.qore"
                        },
                        "5": {
                            "name": "keyword.other.regex.modifier.qore"
                        }
                    },
                    "name": "meta.regex.substitution.qore"
                },
                {
                    "comment": "Regex match (transliteration)",
                    "begin": "(=~)\\s*(tr/)",
                    "end": "([^/]*)(/)([^/]*)(/)([imsxg]*)",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.operator.regexmatch.qore"
                        },
                        "2": {
                            "name": "keyword.operator.regextransopen.qore"
                        }
                    },
                    "endCaptures": {
                        "1": {
                            "name": "string.regexp.qore"
                        },
                        "2": {
                            "name": "keyword.operator.regexmiddle.qore"
                        },
                        "3": {
                            "name": "string.regexp.qore"
                        },
                        "4": {
                            "name": "keyword.operator.regexclose.qore"
                        },
                        "5": {
                            "name": "keyword.other.regex.modifier.qore"
                        }
                    },
                    "name": "meta.regex.transliteration.qore"
                }
            ]
        },
        "parse_options": {
            "patterns": [
                {
                    "match": "^(%[a-z]+(-[a-z]+)+)(.*)$",
                    "name": "meta.parseoption.qore",
                    "captures": {
                        "1": {
                            "name": "keyword.control.parseoption.qore"
                        },
                        "3": {
                            "name": "string.unquoted.qore"
                        }
                    }
                },
                {
                    "match": "^(%[a-z]+)(.*)$",
                    "name": "meta.parseoption.qore",
                    "captures": {
                        "1": {
                            "name": "keyword.control.parseoption.qore"
                        },
                        "2": {
                            "name": "string.unquoted.qore"
                        }
                    }
                }
            ]
        },
        "keywords": {
            "patterns": [
                {
                    "match": "\\b(break|case|continue|default|do|else|for|if|return|switch|thread_exit|while)\\b",
                    "name": "keyword.control.qore"
                },
                {
                    "match": "\\b(try|catch|throw|rethrow)\\b",
                    "name": "keyword.control.exception.qore"
                },
                {
                    "match": "\\b(on_exit|on_error|on_success)\\b",
                    "name": "keyword.control.oncondition.qore"
                },
                {
                    "match": "\\b(by|context|sortBy|sortDescendingBy|subcontext|summarize|where)\\b",
                    "name": "keyword.control.special.qore"
                },
                {
                    "match": "\\b(background|chomp|elements|exists|extract|foldl|foldr|instanceof|keys|map|pop|push|remove|select|splice|shift|trim|unshift)\\b",
                    "name": "keyword.operator.qore"
                },
                {
                    "match": "\\bnew\\b",
                    "name": "keyword.operator.new.qore"
                },
                {
                    "match": "\\bdelete\\b",
                    "name": "keyword.operator.delete.qore"
                },
                {
                    "match": "\\bcast\\b",
                    "name": "keyword.operator.cast.qore"
                }
            ]
        },
        "operators": {
            "patterns": [
                {
                    "match": "\\?|:",
                    "name": "keyword.control.ternary.qore"
                },
                {
                    "match": "(<<|>>>?|\\^)",
                    "name": "keyword.operator.bitwise.qore"
                },
                {
                    "match": "((&|\\^|\\||<<|>>)=)",
                    "name": "keyword.operator.assignment.bitwise.qore"
                },
                {
                    "match": "(===?|!==?|<=|>=|<=>|<|>)",
                    "name": "keyword.operator.comparison.qore"
                },
                {
                    "match": "([+*/%-]=)",
                    "name": "keyword.operator.assignment.arithmetic.qore"
                },
                {
                    "match": "(=)",
                    "name": "keyword.operator.assignment.qore"
                },
                {
                    "match": "(\\-\\-|\\+\\+)",
                    "name": "keyword.operator.increment-decrement.qore"
                },
                {
                    "match": "(\\-|\\+|\\*|\\/|%)",
                    "name": "keyword.operator.arithmetic.qore"
                },
                {
                    "match": "(!|&&|\\|\\|)",
                    "name": "keyword.operator.logical.qore"
                },
                {
                    "match": "(\\||&)",
                    "name": "keyword.operator.bitwise.qore"
                },
                {
                    "match": ";",
                    "name": "punctuation.terminator.qore"
                }
            ]
        },
        "constants": {
            "patterns": [
                {
                    "match": "\\bTrue\\b",
                    "name": "constant.language.boolean.true.qore"
                },
                {
                    "match": "\\bFalse\\b",
                    "name": "constant.language.boolean.false.qore"
                },
                {
                    "match": "\\bNOTHING\\b",
                    "name": "constant.language.nothing.qore"
                },
                {
                    "match": "\\bNULL\\b",
                    "name": "constant.language.null.qore"
                },
                {
                    "match": "\\b(NT_(BINARY|BOOLEAN|CALLREF|CLOSURE|DATE|FLOAT|INT|HASH|LIST|NOTHING|NULL|NUMBER|OBJECT|STRING))\\b",
                    "name": "constant.language.types.qore"
                }
            ]
        },
        "storage_types": {
            "patterns": [
                {
                    "match": "\\bclass\\b",
                    "name": "storage.type.class.qore"
                },
                {
                    "match": "\\bnamespace\\b",
                    "name": "storage.type.namespace.qore"
                },
                {
                    "match": "\\bmodule\\b",
                    "name": "storage.type.module.qore"
                },
                {
                    "match": "\\bsub\\b",
                    "name": "storage.type.subroutine.qore"
                },
                {
                    "match": "\\b(inherits|returns)\\b",
                    "name": "storage.type.special.qore"
                },
                {
                    "match": "\\b(binary|bool|date|float|hash|int|list|number|string)\\b",
                    "name": "storage.type.primitive.qore"
                },
                {
                    "match": "\\b(softbool|softdate|softfloat|softhash|softint|softlist|softnumber|softstring)\\b",
                    "name": "storage.type.primitive.soft.qore"
                },
                {
                    "match": "\\bany\\b",
                    "name": "storage.type.any.qore"
                },
                {
                    "match": "\\b(callref|closure|code)\\b",
                    "name": "storage.type.closure.qore"
                },
                {
                    "match": "\\bdata\\b",
                    "name": "storage.type.data.qore"
                },
                {
                    "match": "\\bnothing\\b",
                    "name": "storage.type.nothing.qore"
                },
                {
                    "match": "\\bnull\\b",
                    "name": "storage.type.null.qore"
                },
                {
                    "match": "\\bobject\\b",
                    "name": "storage.type.object.qore"
                },
                {
                    "match": "\\breference\\b",
                    "name": "storage.type.reference.qore"
                },
                {
                    "match": "\\btimeout\\b",
                    "name": "storage.type.timeout.qore"
                }
            ]
        },
        "storage_modifiers": {
            "patterns": [
                {
                    "match": "\\b(deprecated|final|public)\\b",
                    "name": "storage.modifier.class.qore"
                },
                {
                    "match": "\\b(private:hierarchy|private:internal)\\b",
                    "name": "storage.modifier.private.special.qore"
                },
                {
                    "match": "\\b(abstract|deprecated|final|public|private|static|synchronized)\\b",
                    "name": "storage.modifier.function.qore"
                },
                {
                    "match": "\\b(const|deprecated|final|my|our|public|private|static)\\b",
                    "name": "storage.modifier.variable.qore"
                }
            ]
        },
        "builtins": {
            "patterns": [
                {
                    "match": "\\b(Platform|PlatformOS|PlatformCPU)\\b",
                    "name": "support.variable.platform.qore"
                },
                {
                    "match": "\\b(Build|BuildHost|Compiler|CFLAGS|LDFLAGS|MACHINE_MSB)\\b",
                    "name": "support.variable.build.qore"
                },
                {
                    "match": "\\b(VersionString|VersionMajor|VersionMinor|VersionSub)\\b",
                    "name": "support.variable.version.qore"
                },
                {
                    "match": "\\b(stdin|stdout|stderr|stdin_stream|stdout_stream|stderr_stream)\\b",
                    "name": "support.variable.stdio.qore"
                },
                {
                    "match": "\\b(PathSep|DirSep)\\b",
                    "name": "support.variable.separators.qore"
                }
            ]
        },
        "escaped_chars": {
            "patterns": [
                {
                    "match": "\\\\([0-7]{3}|[0-7]{2}|[0-7]|[\"\\\\bfnrtv])",
                    "name": "constant.character.escape.qore"
                }
            ]
        },
        "format_chars": {
            "patterns": [
                {
                    "match": "(%[aAdfFgGnNsxXy])",
                    "name": "constant.character.format.qore"
                }
            ]
        },
        "strings": {
            "name": "string.quoted.double.qore",
            "begin": "\"",
            "end": "\"",
            "patterns": [
                {
                    "include": "#escaped_chars"
                },
                {
                    "include": "#format_chars"
                },
                {
                    "match": "(&amp;|&lt;|&gt;)",
                    "name": "constant.character.special.qore"
                }
            ]
        },
        "numbers": {
            "patterns": [
                {
                    "match": "\\b((0(x|X)[0-9a-fA-F]*)|(([0-9]+\\.?[0-9]*)|(\\.[0-9]+))((e|E)(\\+|-)?[0-9]+)?)(n)?\\b",
                    "name": "constant.numeric.qore"
                }
            ]
        },
        "binary": {
            "patterns": [
                {
                    "match": "<([0-9A-Fa-f][0-9A-Fa-f])+>",
                    "name": "constant.numeric.binary.qore"
                }
            ]
        },
        "dates": {
            "patterns": [
                {
                    "comment": "ISO-8601 absolute date (with T)",
                    "match": "\\b([0-9]{4})-((0[1-9])|(1[0-2]))-((0[1-9])|([12][0-9])|(3[01]))(T(([01][0-9])|(2[0-3]))(:[0-5][0-9])(:[0-5][0-9](\\.[0-9]{1,6})?)?)(Z|([+-][01][0-9](:[0-5][0-9](:[0-5][0-9])?)?))?\\b",
                    "name": "constant.other.date.isot.qore"
                },
                {
                    "comment": "ISO-8601 absolute date (with dash)",
                    "match": "\\b([0-9]{4})-((0[1-9])|(1[0-2]))-((0[1-9])|([12][0-9])|(3[01]))(-(([01][0-9])|(2[0-3]))(:[0-5][0-9])(:[0-5][0-9])(\\.[0-9]{1,6})?)(Z|([+-][01][0-9](:[0-5][0-9](:[0-5][0-9])?)?))?\\b",
                    "name": "constant.other.date.isodash.qore"
                },
                {
                    "comment": "ISO-8601 absolute date (only YMD+TZ)",
                    "match": "\\b([0-9]{4})-((0[1-9])|(1[0-2]))-((0[1-9])|([12][0-9])|(3[01]))(Z|([+-][01][0-9](:[0-5][0-9](:[0-5][0-9])?)?))?\\b",
                    "name": "constant.other.date.isoymdtz.qore"
                },
                {
                    "comment": "Just h+m+s+tz",
                    "match": "\\b(([01][0-9])|(2[0-3]))(:[0-5][0-9])(:[0-5][0-9](\\.[0-9]{1,6})?)?(Z|([+-][01][0-9](:[0-5][0-9](:[0-5][0-9])?)?))?\\b",
                    "name": "constant.other.date.hmstz.qore"
                },
                {
                    "comment": "Single Relative Time Format",
                    "match": "\\b[0-9]+(D|M|Y|h|m|ms|s|us)\\b",
                    "name": "constant.other.date.singlertf.qore"
                },
                {
                    "comment": "Short Relative Time Format (full)",
                    "match": "\\bP(-?[0-9]+[YMD])+T(-?[0-9]+[HMSu])+\\b",
                    "name": "constant.other.date.shortrtf.qore"
                },
                {
                    "comment": "Short Relative Time Format (only YMDHSu parts)",
                    "match": "\\bP(-?[0-9]+[YMDHSu])+\\b",
                    "name": "constant.other.date.shortrtf.qore"
                },
                {
                    "comment": "Short Relative Time Format (only THMSu parts)",
                    "match": "\\bPT(-?[0-9]+[HMSu])+\\b",
                    "name": "constant.other.date.shortrtf.qore"
                },
                {
                    "comment": "Long Relative Time Format (full)",
                    "match": "\\bP[0-9]{4}-[0-9]{2}-[0-9]{2}(T[0-9]{2}:[0-9]{2}(:[0-9]{2}(\\.[0-9]{1,6})?)?)?\\b",
                    "name": "constant.other.date.lrtf.qore"
                },
                {
                    "comment": "Long Relative Time Format (only h+m+s parts)",
                    "match": "\\bP(T)?[0-9]{2}:[0-9]{2}(:[0-9]{2}(\\.[0-9]{1,6})?)?\\b",
                    "name": "constant.other.date.lrtf.qore"
                }
            ]
        }
    },
    "scopeName": "source.qore"
}